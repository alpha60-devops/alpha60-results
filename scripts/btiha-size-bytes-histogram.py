#!/usr/bin/env python

# -*- coding: utf-8 -*-
"""alpha60-size-bytes-histograms.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1j3gPE4aARdIEcRs11FClfdCLcfgugX3O

"""

import pandas as pd
import sys
import os
from pathlib import Path

import matplotlib.pyplot as plt
plt.rcParams['svg.fonttype'] = 'none'

#data_prefix='https://raw.githubusercontent.com/bdekoz/alpha60-results-x/main/data/csv/bytes/'
#data_file='distributed-denial-of-secrets-cyberwar-rus-ukr-cumulative-detail.2024-btiha-itemized-by-bytes.csv?token=GHSAT0AAAAAACRUU4G6UKKPHLU2SJ6YRE64ZSVGI4A'
#data_file='distributed-denial-of-secrets-cyberwar-rus-ukr-cumulative-detail.2024-btiha-itemized-by-bytes.csv'
#data_url= data_prefix + data_file;

#print("arguments: ", str(len(sys.argv)));
ifile = sys.argv[1];
print ("input data file: ", ifile)

filename = Path(ifile);
ofile = filename.with_suffix('.svg')

# read 1 column csv file, values are bytes
df = pd.read_csv(ifile, header=None)

# convert bytes to gigabytes
kgb = 1024*1024*1024
dfgb = df.div(kgb)

# results are series
smin = dfgb.min();
smax = dfgb.max();
smedian = dfgb.median();
titlex = f"{smedian[0]:.2f} [{smin[0]:.2f}, {smax[0]:.2f}]"


# --- Create histogram, legend and title ---
plt.figure()
dfgb.hist(bins=100)

plt.title(titlex)
plt.xlabel('GB')
plt.ylabel('Media Objects')

plt.savefig(ofile, format="svg")
